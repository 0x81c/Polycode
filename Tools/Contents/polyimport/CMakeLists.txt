FIND_PACKAGE(Assimp REQUIRED)

INCLUDE(PolycodeIncludes)

INCLUDE_DIRECTORIES(
    ${ASSIMP_INCLUDE_DIR} 
    Include)

IF(POLYCODE_BUILD_SHARED)
    ADD_EXECUTABLE(polyimport Source/polyimport.cpp Include/polyimport.h)
    TARGET_LINK_LIBRARIES(polyimport PolyCore ${ASSIMP_LIBRARY_RELEASE})
ENDIF(POLYCODE_BUILD_SHARED)

IF(POLYCODE_BUILD_STATIC)
    ADD_EXECUTABLE(polyimport_static Source/polyimport.cpp Include/polyimport.h)
    TARGET_LINK_LIBRARIES(polyimport_static PolyCore_static ${PHYSFS_LIBRARY} ${ASSIMP_LIBRARY_RELEASE})
ENDIF(POLYCODE_BUILD_STATIC)

IF(POLYCODE_INSTALL_FRAMEWORK)

    # install exes
    IF(POLYCODE_BUILD_SHARED)
        INSTALL(TARGETS polyimport DESTINATION Framework/Tools)
    ENDIF(POLYCODE_BUILD_SHARED)
    
    IF(POLYCODE_BUILD_STATIC)
        INSTALL(TARGETS polyimport_static DESTINATION Framework/Tools)
    ENDIF(POLYCODE_BUILD_STATIC)

ENDIF(POLYCODE_INSTALL_FRAMEWORK)
